# v0.0.6 - tiered option distinguishability + processing polish

**released:** feb 10, 2026

## summary
Options beyond the 8-color palette now get automatic visual differentiation through striped/crosshatch patterns, shaped dots, and inset ring borders — supporting up to 24 uniquely distinguishable options. Also includes shared processing views, bot voters, polling fallback, reveal animation upgrades, and UI polish.

---

## changes

### tiered option distinguishability
- **8 maximally distinct base colors**: culled 12-color palette (removed near-duplicate indigo-400/500, amber-400/500, pink-400/500, emerald-400/500), added orange
- **3-tier system** (8 colors x 3 tiers = 24 unique combos):
  - tier 1 (options 0-7): solid fill, circle dots — identical to previous behavior
  - tier 2 (options 8-15): diagonal stripe overlay on bars, inset white ring on circles, diamond-shaped dots
  - tier 3 (options 16-23): crosshatch overlay on bars, double inset ring on circles, square dots
- **shared `OptionStyle` type** with `hex`, `text`, `modifier`, `shape`, `tier` fields
- **pattern helpers**: `getPatternStyle()` (repeating-linear-gradient), `getShapeClass()` (circle/diamond/square), `getTierBorderStyle()` (inset box-shadow)
- **active-state fix**: changed selection grid active indicator from `ring-2 ring-white` to `outline outline-2 outline-white` to avoid box-shadow collision with tier borders
- **eliminated state preserved**: eliminated options show plain gray (no pattern/border) for clear visual distinction
- removed duplicate `OPTION_HEX` array from RevealAnimation.tsx — all components now share `src/lib/colors.ts`

### shared processing view
- extracted `ProcessingView` component shared between host and participant processing pages
- participant processing page simplified to use shared component

### bot voters
- new `bot-names.ts` with curated bot name list
- `bot_count` setting on rounds for adding simulated voters
- migration for `bot_count` column

### reveal animation improvements
- step button for manual round-by-round advance
- initially randomized option choices in demo
- renamed final tab to "Rounds & Results Table"

### reliability
- polling fallback for realtime subscriptions
- processing status close-route hardening

### bug fixes
- fixed various reveal color scheme issues
- **color consistency across panels**: Rounds and How They Voted now use identical option ordering (canonical `options` prop), so bar position matches legend badge position by color
- UI improvements to processing views

---

## files changed

### new files
- `src/components/ProcessingView.tsx` - shared processing component for host + participant
- `src/lib/bot-names.ts` - curated bot voter names
- `src/app/host/[roundId]/processing/page.tsx` - host processing page
- `src/app/api/rounds/[roundId]/start-processing/route.ts` - start-processing endpoint
- `supabase/migrations/add_bot_count_setting.sql` - bot_count column migration

### modified files
- `src/lib/colors.ts` - rewritten: 8-color palette, `OptionStyle` type, tiered pattern/shape/border helpers
- `src/components/reveal/SelectionGridView.tsx` - tiered styles, pattern/border on circles, outline-based active state
- `src/components/demo/DemoTallyView.tsx` - tiered styles, shaped dots, patterned bars
- `src/components/RevealAnimation.tsx` - removed duplicate palette, tiered styles, step button, randomized choices
- `src/app/round/[roundId]/processing/page.tsx` - simplified to use shared ProcessingView
- `src/app/host/[roundId]/lobby/page.tsx` - bot voter controls, processing toggle improvements
- `src/app/host/[roundId]/reveal/page.tsx` - reveal view improvements
- `src/app/round/[roundId]/reveal/page.tsx` - reveal view improvements
- `src/app/round/[roundId]/waiting/page.tsx` - polling fallback
- `src/app/demo/page.tsx` - randomized choices, UI tweaks
- `src/components/reveal/RevealViewSwitcher.tsx` - tab rename
- `src/app/api/rounds/[roundId]/close/route.ts` - processing status hardening
- `src/app/api/rounds/[roundId]/start/route.ts` - bot voter support
- `src/app/api/rounds/[roundId]/settings/route.ts` - bot_count setting
- `src/types/database.ts` - bot_count field

---

## verification
- [x] `npm run build` passes
- [x] `npm test` passes (208 tests)
- [ ] Vercel deployment live
- [ ] Supabase migration applied (`add_bot_count_setting.sql`)
